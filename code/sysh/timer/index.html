<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Time Difference Calculator</title>
</head>

<body>
  <main>
    <h1>顏色倒數計時器|毛哥EM的基地</h1>
    <label for="target-time">目標時間</label>
    <input type="datetime-local" id="target-time">
    <button id="calculate-button">開始</button>
    <p>當背景變回紅色時時間到</p>
  </main>

  <script>
    const targetTimeInput = document.getElementById("target-time");
    const calculateButton = document.getElementById("calculate-button");
    const timeDifferenceText = document.getElementById("time-difference");

    calculateButton.addEventListener("click", () => {
      document.querySelector("main").style.display = "none";
      const targetTime = new Date(targetTimeInput.value).getTime();
      const tar = Math.floor((targetTime - new Date().getTime()) / 1000);
      const updateDisplay = () => {
        var currentTime = new Date().getTime();
        var timeDiff = (1 - (targetTime - currentTime) / 1000 / tar) * 360;
        document.body.style.backgroundColor = `hsl(${timeDiff}, 50%,50%)`;
        console.log(`Time difference: ${timeDiff}`);
      };

      updateDisplay();
      const timer = setInterval(updateDisplay, 500);
    });
  </script>

</body>

</html>